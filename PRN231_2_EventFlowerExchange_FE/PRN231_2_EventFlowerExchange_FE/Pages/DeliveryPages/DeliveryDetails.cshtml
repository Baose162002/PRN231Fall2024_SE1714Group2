@page "/DeliveryDetail"
@model PRN231_2_EventFlowerExchange_FE.Pages.DeliveryPages.DetailsModel

@{
    ViewData["Title"] = "Delivery Details";
}

<h1 class="text-3xl font-bold text-center text-blue-600 my-8">Delivery Details</h1>

@if (Model.Deliveries.Any())
{
    <div class="container mx-auto px-4">
        @foreach (var delivery in Model.Deliveries)
        {
            <div class="bg-white shadow-lg rounded-lg mb-6">
                <div class="bg-blue-600 text-white rounded-t-lg p-4">
                    <h5 class="font-semibold">Delivery ID: @delivery.DeliveryId</h5>
                </div>
                <div class="p-6">
                    <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <dt class="font-semibold text-green-600">Delivery Status</dt>
                            <dd class="text-green-800">@Html.DisplayFor(model => delivery.DeliveryStatus)</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Reason Note</dt>
                            <dd>@Html.DisplayFor(model => delivery.ReasonNote)</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Pickup Time</dt>
                            <dd>@delivery.PickupTime.ToString("yyyy-MM-dd HH:mm")</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Delivery Time</dt>
                            <dd>@delivery.DeliveryTime.ToString("yyyy-MM-dd HH:mm")</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Order ID</dt>
                            <dd>@delivery.Order.OrderId</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Delivery Address</dt>
                            <dd>@delivery.Order.DeliveryAddress</dd>
                        </div>

                        <div>
                            <dt class="font-semibold text-blue-600">Order Status</dt>
                            <dd class="text-blue-800">@delivery.Order.OrderStatus</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Total Price</dt>
                            <dd class="text-green-600">@delivery.Order.TotalPrice.ToString("C")</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Order Date</dt>
                            <dd>@delivery.Order.OrderDate.ToString("yyyy-MM-dd HH:mm")</dd>
                        </div>

                        <!-- Customer Information -->
                        <div>
                            <dt class="font-semibold">Customer Name</dt>
                            <dd>@delivery.Order.Customer.FullName</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Customer Email</dt>
                            <dd>@delivery.Order.Customer.Email</dd>
                        </div>

                        <div>
                            <dt class="font-semibold">Customer Phone</dt>
                            <dd>@delivery.Order.Customer.Phone</dd>
                        </div>
                    </dl>
                </div>
                <!-- Form for updating statuses -->
                <form method="post" asp-page-handler="UpdateStatus" class="mt-4">
                    <input type="hidden" name="deliveryId" value="@delivery.DeliveryId" />
                    <input type="hidden" name="orderId" value="@delivery.Order.OrderId" />

                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded mt-2">
                        Update Status
                    </button>
                </form>
            </div>
        }
    </div>
}
else
{
    <div class="bg-yellow-100 text-yellow-700 p-4 rounded-lg text-center" role="alert">
        No deliveries found for this user.
    </div>
}

<style>
    /* Additional custom styles can be added here if needed */
</style>
